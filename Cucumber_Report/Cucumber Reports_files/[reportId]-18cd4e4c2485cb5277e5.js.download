(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[20],{59413:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return z},default:function(){return A}});var n=r(92809),s=r(66311),o=r(30266),a=r(809),i=r.n(a),c=r(11163),u=r(67294),l=r(52503),h=r(68216);function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=r(4676),d=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.fetch.bind(window);(0,h.Z)(this,e),this.baseURL=t,this.fetch=r,this.baseURL.pathname.match(/\/$/)||(this.baseURL.pathname="".concat(this.baseURL.pathname,"/"))}var t,r,n;return t=e,(r=[{key:"getUiReport",value:function(){var e=(0,o.Z)(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("reports/".concat(t,"/metadata"),this.baseURL).toString(),e.next=3,this.fetch(r,{method:"GET",headers:{"Content-type":"application/json"}});case 3:if(200===(n=e.sent).status){e.next=11;break}return e.t0=p.K,e.next=8,n.text();case 8:throw e.t1=e.sent,e.t2=n.status,new e.t0(e.t1,e.t2);case 11:return e.next=13,n.json();case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}])&&f(t.prototype,r),n&&f(t,n),e}(),m=r(21952),x=r(31013),j=r(8139),v=r(85893),w=function(){var e=(0,u.useContext)(x.Z);return(0,v.jsxs)(j.Z,{size:"L",type:"info",children:["Report not found. It may have been deleted."," ",(0,v.jsx)(e,{href:"/",children:(0,v.jsx)("a",{children:"Back to homepage"})}),"."]})},g=r(27484),b=r.n(g),y=r(74475),Z=r(85714),k=function(e){var t=e.text,r=(0,u.useState)(!1),n=r[0],s=r[1],o=(0,v.jsx)(Z.Z,{getRedirectPath:function(){return window.location.pathname}});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),s(!0)},children:t}),(0,v.jsxs)(y.Z,{title:t,show:n,onClose:function(){return s(!1)},ctaButton:o,children:["After logging in with GitHub, you will be able to create a"," ",(0,v.jsx)("strong",{children:"report collection."}),(0,v.jsxs)("p",{children:["Reports published in a collection are ",(0,v.jsx)("strong",{children:"not auto-deleted."})]})]})]})},O=function(e){var t=e.reportCreationTimestamp,r=e.showAuthenticateLink,n=b()(t).add(24,"hour"),s=n.isBefore(Date.now())?"any time now":n.fromNow();return(0,v.jsxs)(j.Z,{size:"L",type:"warning",children:["This report will self-destruct ",s,"."," ",r&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(k,{text:"Keep your future reports forever"}),"."]})]})},C=function(){var e=(0,u.useContext)(x.Z);return(0,v.jsxs)(j.Z,{size:"L",type:"info",children:[(0,v.jsx)("p",{children:"This report was published with a personal token."}),(0,v.jsx)(e,{href:"/profile",children:(0,v.jsx)("a",{children:"Have you tried using collections"})})," ","to easily group and share your reports?"]})},P=function(){var e=(0,u.useContext)(x.Z);return(0,v.jsxs)(j.Z,{size:"L",type:"info",children:[(0,v.jsx)(e,{href:"/",children:(0,v.jsx)("a",{children:"Create a collection"})})," ","to keep your reports forever and easily share them."]})},L=r(8398),N=r(19290),_=r(70540),R=r(82690),U=r(27554),S=r(85421),E=r(19647);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t){return{envelopes:(0,E.Z)(e),timestamp:t?new Date(t).getTime():null}}var K=function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new d(new URL((0,S.J)(""))).getUiReport(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=!0,A=function(){var e=(0,_.Z)(),t=(0,s.Z)(e,1)[0],r=(0,c.useRouter)().query.reportId,n=(0,l.ZP)(r,K),a=n.data,u=n.error,h=(0,l.ZP)("reports/".concat(r),function(){var e=(0,o.Z)(i().mark((function e(t){var r,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,S.J)(t),e.next=3,fetch(r);case 3:if(200===(n=e.sent).status){e.next=11;break}return e.t0=p.K,e.next=8,n.text();case 8:throw e.t1=e.sent,e.t2=n.status,new e.t0(e.t1,e.t2);case 11:return e.t3=I,e.next=14,n.text();case 14:return e.t4=e.sent,e.t5=n.headers.get("last-modified"),e.abrupt("return",(0,e.t3)(e.t4,e.t5));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e,t){var r;if(e){var n=null===(r=e.envelopes.find((function(e){return e.meta})))||void 0===r?void 0:r.meta;(0,R.K)("fetch messages success",{url:t,meta:n})}},onError:function(e,t){(0,R.K)("fetch messages error",{url:t,error:e.message})},onLoadingSlow:function(e){(0,R.K)("fetch messages slow",{url:e})}}),f=h.data,d=h.error;if((!f||!a)&&!d&&!u)return(0,v.jsx)("div",{children:"Loading..."});if(u)return(0,v.jsx)(m.Z,{message:u.message||"Unknown error"});if(d&&404===d.httpStatus||!f.timestamp)return(0,v.jsx)(w,{});if(d&&404!==d.httpStatus)return(0,v.jsx)(m.Z,{message:d.message||"Unknown error"});var x=function(e){return e.reportCollectionId?[{url:"/report-collections/".concat(e.reportCollectionId),name:e.reportCollectionName},{url:"/reports/".concat(e.id),name:e.id}]:[]}(a),j=t&&x.length>0;return(0,v.jsxs)(v.Fragment,{children:[j&&(0,v.jsx)(L.Z,{segments:x}),a&&t&&!a.authenticated&&(0,v.jsx)(P,{}),a&&t&&a.authenticated&&!a.reportCollectionId&&(0,v.jsx)(C,{}),a&&!a.authenticated&&(0,v.jsx)(O,{reportCreationTimestamp:f.timestamp,showAuthenticateLink:!t}),(0,v.jsx)(N.Z,D(D({report:a},(0,U.Z)(f.envelopes)),{},{frontPage:!1}))]})}},8398:function(e,t,r){"use strict";var n=r(51436),s=r(17625),o=r(67294),a=r(31013),i=r(85893);t.Z=function(e){var t=e.segments,r=(0,o.useContext)(a.Z);return(0,i.jsx)("nav",{className:"flex pb-5","aria-label":"Breadcrumb",children:(0,i.jsxs)("ol",{className:"flex items-center space-x-4",children:[(0,i.jsx)("li",{children:(0,i.jsx)("div",{children:(0,i.jsx)(r,{href:"/",children:(0,i.jsxs)("a",{className:"text-gray-400 hover:text-gray-500",children:[(0,i.jsx)(s.FontAwesomeIcon,{icon:n.faHome}),(0,i.jsx)("span",{className:"sr-only",children:"Home"})]})})})}),t.map((function(e,n){var s=e.url,o=e.name;return(0,i.jsx)("li",{children:(0,i.jsxs)("div",{className:"flex items-center",children:["/",n===t.length-1?(0,i.jsx)("span",{className:"ml-4 text-sm font-medium text-gray-500",children:o}):(0,i.jsx)(r,{href:s,children:(0,i.jsx)("a",{className:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700",children:o})})]})},n)}))]})})}},57126:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reports/[reportId]",function(){return r(59413)}])}},function(e){e.O(0,[270,291,589,774,888,179],(function(){return t=57126,e(e.s=t);var t}));var t=e.O();_N_E=t}]);